{% extends 'base.html' %}
{% block title %}Settings Â· Data Modeller{% endblock %}
{% block content %}
<h2>Application Settings</h2>
<section>
    <p><strong>Environment:</strong> {{ config.environment }}</p>
    <p><strong>Database:</strong> {{ config.database_url }}</p>
    <p><strong>OpenAI Base URL:</strong> {{ config.openai_base_url }}</p>
    <p><strong>Requests per minute:</strong> {{ config.rate_limit_per_minute }}</p>
</section>

<h3>Persisted Settings</h3>
<form method="post">
    <label for="api_key">OpenAI API key</label>
    <input id="api_key" name="api_key" type="text" value="{{ setting.api_key_enc if setting else '' }}">

    <label for="base_url">Base URL</label>
    <input id="base_url" name="base_url" type="text" value="{{ setting.base_url if setting else '' }}">

    <label for="model_name">Model name</label>
    <input id="model_name" name="model_name" type="text" value="{{ setting.model_name if setting else '' }}">

    <button type="submit">Save Settings</button>
</form>

{% if setting %}
<p><strong>Last updated:</strong> {{ setting.updated_at.strftime('%Y-%m-%d %H:%M') }}</p>
{% else %}
<p>No settings stored yet.</p>
{% endif %}
{% endblock %}
